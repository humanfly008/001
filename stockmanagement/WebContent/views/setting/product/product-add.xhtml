<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
    <h:body>    	
    	  	<script type="text/javascript"> 
	         	/* <![CDATA[ */
	         	function validateAddSubmit(){	
	         		validateNotNull("addForm:productCode",		"รหัสสินค้า");
	         		validateNotNull("addForm:productName",		"ชื่อสินค้า");
	         		validateNotNull("addForm:productType",		"ประเภทสินค้า");
	         		validateNotNull("addForm:unit",				"หน่วย");
	         		validateNotNull("addForm:supplier_input",	"ตัวแทนจำหน่าย");
	         			
			       	return displayErrorMessage('errorMessageDialog');   
				} 
				/* ]]> */
			</script>	
						<h:outputLabel>	
	    					<div id="errorMessageDialog" class="ui-messages ui-widget"/>					
    					</h:outputLabel>
				
						<table width="100%">
						    <tr> 
					        	<td align="left" colspan="2">
									<div style="height: 20px;" id="pnl_header" class="ui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all">
										<span class="ui-panel-title">
											<h:outputText value="ข้อมูล"/>
										</span>
									</div>
					        	</td>	
					        </tr>
					        <tr>
					    		<td width="30%" align="right"><h:outputText value="รหัสสินค้า * "/></td>
					    		<td><p:inputText id="productCode" value="#{productAction.productForm.productCode}" maxlength="45"/></td>
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="ชื่อสินค้า * "/></td>
					    		<td><p:inputText id="productName" value="#{productAction.productForm.productName}" size="50" maxlength="100"/></td>
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="ประเภทสินค้า * "/></td>
					    		<td>
					    			<p:inputText id="productType" value="#{productAction.productForm.productType}" maxlength="45"/>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="หน่วย * "/></td>
					    		<td>
					    			<p:inputText id="unit" value="#{productAction.productForm.unit}" maxlength="45"/>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="จำนวนที่ใช้ต่อชุด * "/></td>
					    		<td>
					    			<p:inputText id="setPerUse" value="#{productAction.productForm.setPerUse}" maxlength="20" onchange="numberFormat5(this, false)" onkeypress="return isInteger(event)"/>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="ตัวแทนจำหน่าย * "/></td>
					    		<td>
					    			<p:selectOneMenu id="supplier" value="#{productAction.productForm.supplierId}" filter="true" filterMatchMode="contains">
								    	<f:selectItem itemValue="" itemLabel="-" />
								    	<f:selectItems value="#{productAction.supplierDropdown}" var="dropdown" itemLabel="#{dropdown.label}" itemValue="#{dropdown.value}" itemLabelEscaped="true"/>
								    </p:selectOneMenu>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="รหัสสินค้าจากตัวแทนจำหน่าย* "/></td>
					    		<td>
					    			<p:inputText id="productSupplierCode" value="#{productAction.productForm.productSupplierCode}" maxlength="45"/>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="ราคาต่อหน่วย "/></td>
					    		<td><p:inputText id="unitPrice" value="#{productAction.productForm.unitPrice}" onchange="numberFormat5(this, false)" onkeypress="return isInteger(event)"/></td>
					    	</tr>
					    	<tr>
					    		<td align="right"><h:outputText value="จำนวนคงเหลือ "/></td>
					    		<td><p:inputText id="qty" value="#{productAction.productForm.qty}" onchange="numberFormat5(this, false)" onkeypress="return isInteger(event)"/></td>
					    	</tr>
					    	<tr>
					    		<td align="right">
					    			<h:graphicImage id="pic" value="/DownloadFileServlet?fileName=#{productAction.productForm.picName}" width="150" height="150"/>
								</td>
					    		<td valign="top">
					    			<p:fileUpload label="เลือกรูปภาพ" update="pic" fileUploadListener="#{productAction.handleFileUpload}" mode="advanced" style="boder:none;"
		    	                		 auto="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
					    		</td>
					    	</tr>
					    	<tr>
					    		<td>&nbsp;</td>
					    	</tr>
					    	<tr> 
					        	<td align="left" colspan="2">
									<div style="height: 20px;" id="pnl_header" class="ui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all">
										<span class="ui-panel-title">
											<h:outputText value="ระดับแจ้งเตือนสินค้าใกล้หมด"/>
										</span>
									</div>
					        	</td>	
					        </tr>
					    	<tr>
					    		<td align="right">
					    			<h:outputText value="จำนวน เหลือน้อยมาก"/>
						    		&nbsp;
									<h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" style="background-color: red"/>
					    		</td>
					    		<td>
					    			<p:inputText id="notificateLevel1Unit" value="#{productAction.productForm.notificateLevel1Unit}" size="10" maxlength="45" onchange="numberFormat5(this, false)" onkeypress="return isInteger(event)"/>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td align="right">
					    			<h:outputText value="จำนวน เหลือน้อย"/>
						    		&nbsp;
									<h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" style="background-color: yellow"/>
					    		</td>
					    		<td>
					    			<p:inputText id="notificateLevel2Unit" value="#{productAction.productForm.notificateLevel2Unit}" size="10" maxlength="45" onchange="numberFormat5(this, false)" onkeypress="return isInteger(event)"/>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td align="right">
					    			<h:outputText value="จำนวน ปานกล่าง"/>
					    			&nbsp;
									<h:outputText value="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" style="background-color: green"/>
					    		</td>
					    		<td>
					    			<p:inputText id="notificateLevel3Unit" value="#{productAction.productForm.notificateLevel3Unit}" size="10" maxlength="45" onchange="numberFormat5(this, false)" onkeypress="return isInteger(event)"/>
					    		</td>	
					    	</tr>
					    	<tr>
					    		<td>&nbsp;</td>
					    	</tr>
					    	<tr> 
					        	<td align="left" colspan="2">
									<div style="height: 20px;" id="pnl_header" class="ui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all">
										<span class="ui-panel-title">
											<h:outputText value="วัตถุดิบนำมาประกอบสินค้า"/>
										</span>
									</div>
					        	</td>
					        </tr>
					        <tr>	
					        	<td colspan="2" align="center">
					        		<h:panelGrid columns="5">
						        		<h:outputText value="ตัวแทนจำหน่าย"/>
							        	<p:selectOneMenu id="supplierGroup" value="#{productAction.productItemGroupSearchForm.supplierId}" filter="true" filterMatchMode="contains">
											<f:selectItem itemValue="" itemLabel="" />
											<f:selectItems value="#{productAction.supplierDropdown}" var="dropdown" itemLabel="#{dropdown.label}" itemValue="#{dropdown.value}" itemLabelEscaped="true"/>
											<p:ajax event="change" update="itemGroup" listener="#{productAction.doSelectSupplier}"/>
											<p:ajax event="change" update="itemGroupDataList" listener="#{productAction.doListTransaction}"/>							
										</p:selectOneMenu>
									
										<h:outputText value="วัตถุดิบ"/>
										<p:selectOneMenu id="itemGroup" value="#{productAction.productItemGroupSearchForm.itemId}" filter="true" filterMatchMode="contains">
											<f:selectItem itemValue="" itemLabel="" />
											<f:selectItems value="#{productAction.itemDropdown}" var="dropdown" itemLabel="#{dropdown.label}" itemValue="#{dropdown.value}" itemLabelEscaped="true"/>
											<p:ajax event="change" update="supplierGroup" listener="#{productAction.doSelectItem}"/>
											<p:ajax event="change" update="itemGroupDataList" listener="#{productAction.doListTransaction}"/>							
										</p:selectOneMenu>
										
										<p:commandButton value="เพิ่ม" update="errorItemGroupmessage,itemGroupDataList" actionListener="#{productAction.doAddItemGroup}" icon="ui-icon-circle-plus"/>
									</h:panelGrid>
									
					        		<p:messages id="errorItemGroupmessage" closable="true"/>
					        		
					        		<p:dataTable id="itemGroupDataList" var="dataList" value="#{productAction.productItemGroupList}" rowIndexVar="no" styleClass="dataTable" emptyMessage="No Data" stickyHeader="true">
										<p:column>
									    	<f:facet name="header">
									        	<h:outputText value="No." />
									      	</f:facet>
									      	<div style="text-align:center;vertical-align: text-top">
										    	<h:outputText value="#{no+1}" />
										 	</div>
									 	</p:column>
									 	<p:column>
									    	<f:facet name="header">
									        	<h:outputText value="ชื่อวัตถุดิบ" />
									      	</f:facet>
									      	<div style="text-align:center;vertical-align: text-top">
										    	<h:outputText value="#{dataList.itemNameTh}" />
										    	<h:outputText value="-"/>
										    	<h:outputText value="#{dataList.itemSupplierCode}" />
										    </div>
									 	</p:column>
									 	<p:column>
									    	<f:facet name="header">
									        	<h:outputText value="จำนวนคงเหลือ" />
									      	</f:facet>
									      	<div style="text-align:right;vertical-align: text-top">
										    	<h:outputText value="#{dataList.itemQty}" />
										    </div>
									 	</p:column>
									 	<p:column>
									    	<f:facet name="header">
									        	<h:outputText value="จำนวนที่ใช้ต่อชุด" />
									      	</f:facet>
									      	<div style="text-align:right;vertical-align: text-top">
										    	<h:outputText value="#{dataList.setPerUse}" />
										    </div>
									 	</p:column>
									 	<p:column>
									    	<p:commandButton process="@this" value="ลบ" ajax="true" update="itemGroupDataList" actionListener="#{productAction.doDeleteItemGroup}">
									    		<f:attribute name="no" value="#{no+1}" />
									    	</p:commandButton>
								   		</p:column>
						        	</p:dataTable>					        	
					        	</td>
					        </tr>
					    	<tr><td>&nbsp;</td></tr>
					    	<tr><td>&nbsp;</td></tr>
					    	<tr>
					    		<td colspan="2">
						    		<div align="left">
				    					<p:commandButton value="บันทึก" process="@this" action="#{productAction.doCreateProduct}" update=":listForm" onclick="return validateAddSubmit();" oncomplete="addProductDialog.hide()" styleClass="ui-priority-primary" icon="ui-icon-disk"/>
									</div>	
					    		</td>
					    	</tr>
					    </table>
					    
					    
				    	<br/><br/>
     	
	</h:body>
</html>
                